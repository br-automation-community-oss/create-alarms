#####################################################################################################################################################
# Dependencies
#####################################################################################################################################################
import os
import re
import sys

#####################################################################################################################################################
# List of possible properties
#####################################################################################################################################################
NAMES = ["Code", "Severity", "Behavior"]

#####################################################################################################################################################
# Class definition
#####################################################################################################################################################
class PropertyClass:
    Name = 0        # Index to NAMES list 
    Task = ""      
    Valid = False 
    Value = "" 
    
    def __init__(self, Name, Task, Valid, Value):
        self.Name = Name
        self.Task = Task
        self.Valid = Valid
        self.Value = Value

#####################################################################################################################################################
# Open Global.typ file
#####################################################################################################################################################
LogicalPath = os.path.dirname(os.path.abspath(__file__))
if (LogicalPath.find("Logical") != -1):
    LogicalPath = LogicalPath[:LogicalPath.find("Logical") + 7]
    TypPath = os.path.join(LogicalPath, "Global.typ")
    if os.path.isfile(TypPath):
        GlobalTyp = open(TypPath, "r")
    else:
        print("File Global.typ does not exist.")
        sys.exit()
else:
    print("Cannot find the Logical folder.")
    sys.exit()

#####################################################################################################################################################
# Parse data from Global.typ file
#####################################################################################################################################################
for Row in GlobalTyp:
    print(Row)

#####################################################################################################################################################
# Close Global.typ file
#####################################################################################################################################################
GlobalTyp.close()

#####################################################################################################################################################
# Validity of dependencies
#####################################################################################################################################################

# No validity of dependencies with basic properties

#####################################################################################################################################################
# Get alarm names list of TMX file
#####################################################################################################################################################
TmxPath = os.path.join(LogicalPath, "Alarms", "Alarms.tmx")
if os.path.isfile(TmxPath):
    TmxFile = open(TmxPath, "r")
    
    # Get alarm names

    TmxFile.close()
else:
    print("File Global.typ does not exist.")
    sys.exit()

# a = 1 or 0
# property = Property()
# ######

# property.name = 0
# property.value = "123"
# property.valid = True

# property.name = 1
# property.value = "456"
# property.valid = True
# obj.append(Obj("task1", [Property(0, "5", True), Property(0, "5", True)]))

# property.name = 0
# property.value = "789"
# property.valid = True

# property.name = 1
# property.value = "000"
# property.valid = True
# obj.append(Obj("task2", property))

# ######

# ######
# for item in obj:
#     print(item.name)